---
title: 28.å®žçŽ° strStr()
date: 2021-01-03 16:16:16
categories:
 - leetcode
tags:
 - leetcode
 - ç®—æ³•
---

[å®žçŽ° strStr()](https://leetcode-cn.com/problems/implement-strstr/)

æ¶ˆè€—ï¼š

![æ¶ˆè€—](/images/leetcode/28.png)

è¯•è¯•jsçš„`indexOf` ðŸ˜ðŸ¤£

```javascript
/**
 * @param {string} haystack
 * @param {string} needle
 * @return {number}
 */
var strStr = function(haystack, needle) {
    return haystack.indexOf(needle)
};
```

-----------------------------

å½“ä¸¤å­—ç¬¦ä¸²ç›¸ç­‰æ—¶ï¼Œè¿”å›ž0
haystack ä¸ºç©ºä¸²æ—¶ï¼Œè¿”å›ž-1ï¼ˆä¸Šé¢å·²æŽ’é™¤ä¸¤ä¸ªéƒ½æ˜¯ç©ºå­—ç¬¦çš„æƒ…å†µï¼‰
needle ä¸ºç©ºä¸²æ—¶ï¼Œè¿”å›ž0
needle çš„é•¿åº¦å¤§äºŽ haystack è¿”å›ž-1

å¾ªçŽ¯ haystack ï¼Œiè®°å½•å…¶æŒ‡é’ˆã€‚å’Œ needle çš„ç¬¬ä¸€ä½è¿›è¡Œç›¸ç­‰åˆ¤æ–­ï¼Œå½“ä¸€æ ·æ—¶ï¼Œå¼€å§‹å¾ªçŽ¯ needleï¼Œjè®°å½•å…¶æŒ‡é’ˆã€‚resè®°å½•ç›¸ç­‰æ—¶çš„iæŒ‡é’ˆï¼Œå³ç»“æžœã€‚

iå’ŒjåŠ ä¸€ï¼Œç»§ç»­å¾ªçŽ¯ã€‚

- å¦‚æžœä¹‹åŽå…¨ç›¸ç­‰ï¼Œä¸­é—´æ²¡æœ‰å‡ºçŽ°ä¸ç­‰çš„æƒ…å†µã€‚ï¼ˆhelloï¼Œllï¼‰é‚£ä¹ˆå½“jå’Œneedleçš„é•¿åº¦ç›¸ç­‰äº†ï¼Œå°±è·³å‡ºå¾ªçŽ¯ã€‚
- å¦‚æžœä¸­é—´å‡ºçŽ°ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆiå°±è¿”å›žresè®°å½•çš„ä¸‹ä¸€ä½ç½®ï¼Œç»§ç»­å¾ªçŽ¯ï¼Œreså’Œjé‡ç½®ã€‚ç»§ç»­å¯¹æ¯” noodle çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚

é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œå½“jå’Œlenç›¸ç­‰å°±è¯´æ˜ŽåŒ¹é…åˆ°äº†ï¼Œè·³å‡ºå¾ªçŽ¯ï¼›iç­‰äºŽhaystacké•¿åº¦ï¼Œå³haystackå¾ªçŽ¯å®Œæ¯•åŽï¼Œjè¿˜ä¸ç­‰äºŽlenï¼Œé‚£ä¹ˆå°±æ˜¯æ²¡æ‰¾åˆ°ï¼Œresé‡ç½®ï¼Œè·³å‡ºå¾ªçŽ¯ã€‚ç»“æŸ

æ¶ˆè€—ï¼š

![æ¶ˆè€—](/images/leetcode/28-2.png)

```javascript
/**
 * @param {string} haystack
 * @param {string} needle
 * @return {number}
 */
var strStr = function(haystack, needle) {
    if(haystack===needle) return 0
    if(haystack==="") return -1
    if(needle==="") return 0
    if(needle.length>haystack.length) return -1
    var j=0,i=0,res=-1

    while(i>=0){
        var c=haystack[i]
        var len=needle.length
        if(j===len) break
        if(i==haystack.length){
            if(j<len){
                res=-1
            }
            break
        }

        if(c===needle[j]){
            j++
            if(res===-1) res=i
            i++
        }else{
            if(res>-1){
                i=res+1
                j=0
                res=-1
            }else{
                i++
            }
            
        }
    }
  
    return res
};
```