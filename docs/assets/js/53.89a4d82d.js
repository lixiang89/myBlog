(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{687:function(t,a,s){"use strict";s.r(a);var n=s(9),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"window"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#window"}},[t._v("#")]),t._v(" window")]),t._v(" "),s("h3",{attrs:{id:"窗口关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#窗口关系"}},[t._v("#")]),t._v(" 窗口关系")]),t._v(" "),s("p",[s("code",[t._v("window")]),t._v("属性：")]),t._v(" "),s("ul",[s("li",[t._v("top：指向最上（外）层窗口，即浏览器窗口本身。")]),t._v(" "),s("li",[t._v("parent：指向当前窗口的父窗口。若当前窗口是最上层窗口，则"),s("code",[t._v("parent")]),t._v("等于"),s("code",[t._v("top")]),t._v("等于"),s("code",[t._v("window")]),t._v("。")]),t._v(" "),s("li",[t._v("self：始终指向"),s("code",[t._v("window")]),t._v("。实际上"),s("code",[t._v("self")]),t._v("和"),s("code",[t._v("window")]),t._v("是同一个对象，其出现目的是为了和"),s("code",[t._v("top")]),t._v("、"),s("code",[t._v("parent")]),t._v("保持一致")]),t._v(" "),s("li",[t._v("name：窗口名称，若最上层窗口不是由"),s("code",[t._v("window.open()")]),t._v("打开的，那么其"),s("code",[t._v("name")]),t._v("不会包含值。")])]),t._v(" "),s("h3",{attrs:{id:"像素比"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#像素比"}},[t._v("#")]),t._v(" 像素比")]),t._v(" "),s("p",[t._v("CSS像素是Web开发中使用的统一像素单位。这个单位的背后其实是一个角度：0.0213°。如果屏幕距离人眼是一臂长，则以这个角度计算的CSS像素约为1/96英寸（0.0264cm）。")]),t._v(" "),s("p",[t._v("这样定义像素大小是为了在不同设备上统一标准。比如，低分辨率平板设备上12像素的文字应该与高清4K屏幕下12像素的文字具有相同的大小。这样就会有个问题，不同像素密度的屏幕下就会有不同的缩放系数，以便把物理像素（屏幕实际分辨率）转换为CSS像素（浏览器报告的虚拟分辨率）。举个例子，手机屏幕的物理分辨率为1920×1080，但因为其像素可能非常小，所以浏览器就需要将其分辨率降为较低的逻辑分辨率，比如640×320。这个物理像素与CSS像素的转换比率由"),s("code",[t._v("window.devicePixelRatio")]),t._v("属性提供。上栗其值为3。这样一来，12像素的文字实际上是用36像素的物理像素来显示的。")]),t._v(" "),s("p",[s("code",[t._v("window.devicePixelRatio")]),t._v("实际上与每英寸像素数（DPI）是对应的。DPI表示单位像素密度。")]),t._v(" "),s("h3",{attrs:{id:"打开新窗口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打开新窗口"}},[t._v("#")]),t._v(" 打开新窗口")]),t._v(" "),s("p",[s("code",[t._v("window.open()")]),t._v("可以打开一个新的窗口，返回对新窗口的引用：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" win"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://win.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"win"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"height=400,width=400"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("关闭窗口，在返回的引用上使用close()")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("win"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("这个方法只能用于window.open()创建的窗口，弹出的窗口可以调用top.close()来关闭自己。关闭窗口后，引用依然存在，但是只能用于检查其closed属性了：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("win"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("closed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),s("p",[t._v("新创建（弹出）的窗口window上有一个opener属性，指向创建它的窗口。这个属性只在最上层window（top）对象上存在。")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("win"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("opener"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),s("p",[t._v("窗口不会记录自己打开的新窗口，需要开发者自己记录。把opener设置为null会切断它们之间的联系，且无法恢复。")]),t._v(" "),s("p",[t._v("浏览器会在用户操作下才允许创建弹窗，通常在鼠标点击或按下键盘中某个键时才能打开。所有现代浏览器都内置了屏蔽弹窗的程序，因此大多意料之外的弹窗都会被屏蔽。若弹窗被屏蔽了，window.open()可能会返回null或抛出错误，所以可通过下面的方法来判断弹窗是否被屏蔽：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" blocked"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" win"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://win.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_blank"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("win"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" blocked"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    blocked"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blocked"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 证明被屏蔽，做一下什么")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"location"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#location"}},[t._v("#")]),t._v(" location")]),t._v(" "),s("p",[t._v("location是window的属性，也是document的属性，它们指向同一个对象。")]),t._v(" "),s("p",[t._v("用location来设置URL通常会使用：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("location"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),t._v("\nlocation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("herf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 它们与显式调用assign()是一样的。")]),t._v("\nlocation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("assign")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("除了hash之外，只要修改location的一个属性，都会导致页面重新加载新的URL。")]),t._v(" "),s("h2",{attrs:{id:"history"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#history"}},[t._v("#")]),t._v(" history")]),t._v(" "),s("p",[t._v("history对象表示当前窗口首次使用以来，用户的导航历史记录。每个window都有自己的history对象出于安全考虑，这个对象不会暴露用户访问过的URL，但可以通过它来前进、后退。")]),t._v(" "),s("h3",{attrs:{id:"方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),s("ul",[s("li",[t._v("pushState(state, title[, url])：向当前浏览器会话的历史堆栈中添加一个状态（state）。请注意，浏览器不会在调用pushState() 之后尝试加载此URL，但可能会稍后尝试加载URL，例如在用户重新启动浏览器之后。 新的URL不必是绝对的。 如果是相对的，则相对于当前URL进行解析。 新网址必须与当前网址相同 origin； 否则，pushState()将引发异常。 如果未指定此参数，则将其设置为文档的当前URL。")]),t._v(" "),s("li",[t._v("replaceState(stateObj, title[, url])：修改当前历史记录实体，如果你想更新当前的state对象或者当前历史实体的URL来响应用户的的动作的话这个方法将会非常有用。")]),t._v(" "),s("li",[t._v("go([num])：正数前进，负数后退。不传值或传0，相当于"),s("code",[t._v("location.reload()")]),t._v("。")]),t._v(" "),s("li",[t._v("back()：相当于go(-1)")]),t._v(" "),s("li",[t._v("forward()：相当于go(1)")])]),t._v(" "),s("h3",{attrs:{id:"事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件"}},[t._v("#")]),t._v(" 事件")]),t._v(" "),s("ul",[s("li",[t._v("hashchange：该事件会在URL后面的hash值变化时被触发。")]),t._v(" "),s("li",[t._v("popstate：当活动历史记录条目更改时，将触发"),s("code",[t._v("popstate")]),t._v("事件。如果被激活的历史记录条目是通过对"),s("code",[t._v("history.pushState()")]),t._v("的调用创建的，或者受到对"),s("code",[t._v("history.replaceState()")]),t._v("的调用的影响，popstate事件的state属性包含历史条目的状态对象的副本。需要注意的是调用"),s("code",[t._v("history.pushState()")]),t._v("或"),s("code",[t._v("history.replaceState()")]),t._v("不会触发popstate事件。只有在做出浏览器动作时，才会触发该事件，如用户点击浏览器的回退按钮（或者在Javascript代码中调用"),s("code",[t._v("history.back()")]),t._v("或者"),s("code",[t._v("history.forward()")]),t._v("方法）")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'popstate'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为pushState或replaceState传入的state值")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("更多参考 "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/History_API",target:"_blank",rel:"noopener noreferrer"}},[t._v("History API"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);